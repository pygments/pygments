---input---
execute as @e[nbt={ Item: {id: "minecraft:diamond", Count: 64 } }] run
setblock ~ ~ ~ minecraft:dispenser[facing=up]{Items: [{id: "minecraft:diamond", Count: 1}]}

---tokens---
'execute'     Name.Builtin
' '           Text.Whitespace
'as'          Keyword.Constant
' '           Text.Whitespace
'@e'          Name.Variable
'['           Punctuation
'nbt'         Name.Tag
'='           Operator
'{'           Punctuation
' '           Text.Whitespace
'Item'        Name.Attribute
':'           Punctuation
' '           Text.Whitespace
'{'           Punctuation.Compound.Push
'id'          Name.Attribute
':'           Punctuation
' '           Text.Whitespace
'"'           Literal.String.Double
'minecraft:diamond' Literal.String.Double
'"'           Literal.String.Double
','           Punctuation
' '           Text.Whitespace
'Count'       Name.Attribute
':'           Punctuation
' '           Text.Whitespace
'64'          Literal.Number.Integer
' '           Text.Whitespace
'}'           Punctuation.Compound.Pop
' '           Text.Whitespace
'}'           Punctuation.Compound.Pop
']'           Error
' '           Text.Whitespace
'run'         Name.Attribute
'\n'          Text.Whitespace

'setblock'    Name.Variable.Class
' '           Text.Whitespace
'~'           Error
' '           Text.Whitespace
'~'           Error
' '           Text.Whitespace
'~'           Error
' '           Text.Whitespace
'minecraft'   Name.Variable.Class
':'           Error
'dispenser'   Name.Variable.Class
'['           Punctuation
'facing'      Name.Tag
'='           Operator
'up'          Name.Variable.Class
']'           Punctuation
'{'           Punctuation
'Items'       Name.Attribute
':'           Punctuation
' '           Text.Whitespace
'['           Punctuation.List.New
'{'           Punctuation.Compound.New
'id'          Name.Attribute
':'           Punctuation
' '           Text.Whitespace
'"'           Literal.String.Double
'minecraft:diamond' Literal.String.Double
'"'           Literal.String.Double
','           Punctuation
' '           Text.Whitespace
'Count'       Name.Attribute
':'           Punctuation
' '           Text.Whitespace
'1'           Literal.Number.Integer
'}'           Punctuation.Compound.Pop
']'           Punctuation.List.Pop
'}'           Punctuation.Compound.Pop
'\n'          Text.Whitespace
