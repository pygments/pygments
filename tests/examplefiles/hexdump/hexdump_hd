00000000  2f 2f 20 43 72 65 61 74  65 64 20 62 79 20 4c 69  |// Created by Li|
00000010  6f 6e 65 6c 6c 6f 20 4c  75 6e 65 73 75 20 61 6e  |onello Lunesu an|
00000020  64 20 70 6c 61 63 65 64  20 69 6e 20 74 68 65 20  |d placed in the |
00000030  70 75 62 6c 69 63 20 64  6f 6d 61 69 6e 2e 0a 2f  |public domain../|
00000040  2f 20 54 68 69 73 20 66  69 6c 65 20 68 61 73 20  |/ This file has |
00000050  62 65 65 6e 20 6d 6f 64  69 66 69 65 64 20 66 72  |been modified fr|
00000060  6f 6d 20 69 74 73 20 6f  72 69 67 69 6e 61 6c 20  |om its original |
00000070  76 65 72 73 69 6f 6e 2e  0a 2f 2f 20 49 74 20 68  |version..// It h|
00000080  61 73 20 62 65 65 6e 20  66 6f 72 6d 61 74 74 65  |as been formatte|
00000090  64 20 74 6f 20 66 69 74  20 79 6f 75 72 20 73 63  |d to fit your sc|
000000a0  72 65 65 6e 2e 0a 6d 6f  64 75 6c 65 20 70 68 6f  |reen..module pho|
000000b0  6e 65 6e 6f 3b 20 20 20  20 20 2f 2f 20 6f 70 74  |neno;     // opt|
000000c0  69 6f 6e 61 6c 0a 69 6d  70 6f 72 74 20 73 74 64  |ional.import std|
000000d0  2e 73 74 64 69 6f 3b 20  20 20 2f 2f 20 77 72 69  |.stdio;   // wri|
000000e0  74 65 66 6c 6e 20 20 20  20 20 0a 69 6d 70 6f 72  |tefln     .impor|
000000f0  74 20 73 74 64 2e 63 74  79 70 65 3b 20 20 20 2f  |t std.ctype;   /|
00000100  2f 20 69 73 64 69 67 69  74 20 20 20 20 20 0a 69  |/ isdigit     .i|
00000110  6d 70 6f 72 74 20 73 74  64 2e 73 74 72 65 61 6d  |mport std.stream|
00000120  3b 20 20 2f 2f 20 42 75  66 66 65 72 65 64 46 69  |;  // BufferedFi|
00000130  6c 65 0a 0a 2f 2f 20 4a  75 73 74 20 66 6f 72 20  |le..// Just for |
00000140  72 65 61 64 61 62 69 6c  69 74 79 20 28 69 6d 61  |readability (ima|
00000150  67 69 6e 65 20 63 68 61  72 5b 5d 5b 5d 5b 63 68  |gine char[][][ch|
00000160  61 72 5b 5d 5d 29 20 20  20 20 0a 61 6c 69 61 73  |ar[]])    .alias|
00000170  20 63 68 61 72 5b 5d 20  73 74 72 69 6e 67 3b 0a  | char[] string;.|
00000180  61 6c 69 61 73 20 73 74  72 69 6e 67 5b 5d 20 73  |alias string[] s|
00000190  74 72 69 6e 67 61 72 72  61 79 3b 0a 0a 2f 2f 2f  |tringarray;..///|
000001a0  20 53 74 72 69 70 73 20  6e 6f 6e 2d 64 69 67 69  | Strips non-digi|
000001b0  74 20 63 68 61 72 61 63  74 65 72 73 20 66 72 6f  |t characters fro|
000001c0  6d 20 74 68 65 20 73 74  72 69 6e 67 20 28 43 4f  |m the string (CO|
000001d0  57 29 0a 73 74 72 69 6e  67 20 73 74 72 69 70 4e  |W).string stripN|
000001e0  6f 6e 44 69 67 69 74 28  20 69 6e 20 73 74 72 69  |onDigit( in stri|
000001f0  6e 67 20 6c 69 6e 65 20  29 20 0a 7b 0a 20 20 20  |ng line ) .{.   |
00000200  20 73 74 72 69 6e 67 20  72 65 74 3b 0a 20 20 20  | string ret;.   |
00000210  20 66 6f 72 65 61 63 68  28 75 69 6e 74 20 69 2c  | foreach(uint i,|
00000220  20 63 3b 20 6c 69 6e 65  29 20 7b 0a 20 20 20 20  | c; line) {.    |
00000230  20 20 20 20 2f 2f 20 45  72 72 6f 72 3a 20 73 74  |    // Error: st|
00000240  64 2e 63 74 79 70 65 2e  69 73 64 69 67 69 74 20  |d.ctype.isdigit |
00000250  61 74 20 43 3a 5c 64 6d  64 5c 73 72 63 5c 70 68  |at C:\dmd\src\ph|
00000260  6f 62 6f 73 5c 73 74 64  5c 63 74 79 70 65 2e 64  |obos\std\ctype.d|
00000270  28 33 37 29 20 0a 20 20  20 20 20 20 20 20 2f 2f  |(37) .        //|
00000280  20 63 6f 6e 66 6c 69 63  74 73 20 77 69 74 68 20  | conflicts with |
00000290  73 74 64 2e 73 74 72 65  61 6d 2e 69 73 64 69 67  |std.stream.isdig|
000002a0  69 74 20 61 74 20 43 3a  5c 64 6d 64 5c 73 72 63  |it at C:\dmd\src|
000002b0  5c 70 68 6f 62 6f 73 5c  73 74 64 5c 73 74 72 65  |\phobos\std\stre|
000002c0  61 6d 2e 64 28 32 39 32  34 29 0a 20 20 20 20 20  |am.d(2924).     |
000002d0  20 20 20 69 66 20 28 21  73 74 64 2e 63 74 79 70  |   if (!std.ctyp|
000002e0  65 2e 69 73 64 69 67 69  74 28 63 29 29 20 7b 0a  |e.isdigit(c)) {.|
000002f0  20 20 20 20 20 20 20 20  20 20 20 20 69 66 20 28  |            if (|
00000300  21 72 65 74 29 0a 20 20  20 20 20 20 20 20 20 20  |!ret).          |
00000310  20 20 20 20 20 20 72 65  74 20 3d 20 6c 69 6e 65  |      ret = line|
00000320  5b 30 2e 2e 69 5d 3b 20  20 20 20 0a 20 20 20 20  |[0..i];    .    |
00000330  20 20 20 20 7d 20 20 20  20 0a 20 20 20 20 20 20  |    }    .      |
00000340  20 20 65 6c 73 65 20 69  66 20 28 72 65 74 29 0a  |  else if (ret).|
00000350  20 20 20 20 20 20 20 20  20 20 20 20 72 65 74 20  |            ret |
00000360  7e 3d 20 63 3b 20 20 20  20 0a 20 20 20 20 7d 20  |~= c;    .    } |
00000370  20 20 20 0a 20 20 20 20  72 65 74 75 72 6e 20 72  |   .    return r|
00000380  65 74 3f 72 65 74 3a 6c  69 6e 65 3b 0a 7d 0a 0a  |et?ret:line;.}..|
00000390  75 6e 69 74 74 65 73 74  20 7b 0a 20 20 20 20 61  |unittest {.    a|
000003a0  73 73 65 72 74 28 20 73  74 72 69 70 4e 6f 6e 44  |ssert( stripNonD|
000003b0  69 67 69 74 28 22 61 73  64 66 22 29 20 3d 3d 20  |igit("asdf") == |
000003c0  22 22 20 20 29 3b 0a 20  20 20 20 61 73 73 65 72  |""  );.    asser|
000003d0  74 28 20 73 74 72 69 70  4e 6f 6e 44 69 67 69 74  |t( stripNonDigit|
000003e0  28 22 5c 27 31 33 2d 3d  32 20 34 6b 6f 70 22 29  |("\'13-=2 4kop")|
000003f0  20 3d 3d 20 20 22 31 33  32 34 22 20 20 29 3b 0a  | ==  "1324"  );.|
00000400  7d 0a 0a 2f 2f 2f 20 43  6f 6e 76 65 72 74 73 20  |}../// Converts |
00000410  61 20 77 6f 72 64 20 69  6e 74 6f 20 61 20 6e 75  |a word into a nu|
00000420  6d 62 65 72 2c 20 69 67  6e 6f 72 69 6e 67 20 61  |mber, ignoring a|
00000430  6c 6c 20 6e 6f 6e 20 61  6c 70 68 61 20 63 68 61  |ll non alpha cha|
00000440  72 61 63 74 65 72 73 20  20 0a 73 74 72 69 6e 67  |racters  .string|
00000450  20 77 6f 72 64 54 6f 4e  75 6d 28 20 69 6e 20 73  | wordToNum( in s|
00000460  74 72 69 6e 67 20 77 6f  72 64 20 29 0a 7b 0a 2f  |tring word ).{./|
00000470  2f 20 74 72 61 6e 73 6c  61 74 69 6f 6e 20 74 61  |/ translation ta|
00000480  62 6c 65 20 66 6f 72 20  74 68 65 20 74 61 73 6b  |ble for the task|
00000490  20 61 74 20 68 61 6e 64  0a 63 6f 6e 73 74 20 63  | at hand.const c|
000004a0  68 61 72 5b 32 35 36 5d  20 54 52 41 4e 53 4c 41  |har[256] TRANSLA|
000004b0  54 45 20 3d 20 20 20 20  0a 20 20 20 20 22 20 20  |TE =    .    "  |
000004c0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
000004d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 22 20  |              " |
000004e0  20 2f 2f 20 30 20 20 20  0a 20 20 20 20 22 20 20  | // 0   .    "  |
000004f0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 30 31  |              01|
00000500  32 33 34 35 36 37 38 39  20 20 20 20 20 20 22 20  |23456789      " |
00000510  20 2f 2f 20 33 32 20 20  20 20 20 0a 20 20 20 20  | // 32     .    |
00000520  22 20 35 37 36 33 30 34  39 39 36 31 37 38 35 31  |" 57630499617851|
00000530  38 38 31 32 33 34 37 36  32 32 33 39 20 20 20 20  |881234762239    |
00000540  20 22 20 20 2f 2f 20 36  34 20 20 20 0a 20 20 20  | "  // 64   .   |
00000550  20 22 20 35 37 36 33 30  34 39 39 36 31 37 38 35  | " 5763049961785|
00000560  31 38 38 31 32 33 34 37  36 32 32 33 39 20 20 20  |1881234762239   |
00000570  20 20 22 0a 20 20 20 20  22 20 20 20 20 20 20 20  |  ".    "       |
00000580  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00000590  20 20 20 20 20 20 20 20  20 22 0a 20 20 20 20 22  |         ".    "|
000005a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000005c0  22 0a 20 20 20 20 22 20  20 20 20 20 20 20 20 20  |".    "         |
000005d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
000005e0  20 20 20 20 20 20 20 22  20 20 20 20 0a 20 20 20  |       "    .   |
000005f0  20 22 20 20 20 20 20 20  20 20 20 20 20 20 20 20  | "              |
00000600  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00000610  20 20 22 3b 0a 20 20 20  20 73 74 72 69 6e 67 20  |  ";.    string |
00000620  72 65 74 3b 0a 20 20 20  20 66 6f 72 65 61 63 68  |ret;.    foreach|
00000630  28 63 3b 20 63 61 73 74  28 75 62 79 74 65 5b 5d  |(c; cast(ubyte[]|
00000640  29 77 6f 72 64 29 0a 20  20 20 20 20 20 20 20 69  |)word).        i|
00000650  66 20 28 54 52 41 4e 53  4c 41 54 45 5b 63 5d 20  |f (TRANSLATE[c] |
00000660  21 3d 20 27 20 27 29 0a  20 20 20 20 20 20 20 20  |!= ' ').        |
00000670  20 20 20 20 72 65 74 20  7e 3d 20 54 52 41 4e 53  |    ret ~= TRANS|
00000680  4c 41 54 45 5b 63 5d 3b  0a 20 20 20 20 72 65 74  |LATE[c];.    ret|
00000690  75 72 6e 20 72 65 74 3b  0a 7d 0a 0a 75 6e 69 74  |urn ret;.}..unit|
000006a0  74 65 73 74 20 7b 0a 20  2f 2f 20 54 65 73 74 20  |test {. // Test |
000006b0  77 6f 72 64 54 6f 4e 75  6d 20 75 73 69 6e 67 20  |wordToNum using |
000006c0  74 68 65 20 74 61 62 6c  65 20 66 72 6f 6d 20 74  |the table from t|
000006d0  68 65 20 74 61 73 6b 20  64 65 73 63 72 69 70 74  |he task descript|
000006e0  69 6f 6e 2e 0a 20 61 73  73 65 72 74 28 20 22 30  |ion.. assert( "0|
000006f0  31 31 31 32 32 32 33 33  33 34 34 35 35 36 36 36  |1112223334455666|
00000700  37 37 37 38 38 38 39 39  39 22 20 3d 3d 0a 20 20  |777888999" ==.  |
00000710  20 77 6f 72 64 54 6f 4e  75 6d 28 22 45 20 7c 20  | wordToNum("E | |
00000720  4a 20 4e 20 51 20 7c 20  52 20 57 20 58 20 7c 20  |J N Q | R W X | |
00000730  44 20 53 20 59 20 7c 20  46 20 54 20 7c 20 41 20  |D S Y | F T | A |
00000740  4d 20 7c 20 43 20 49 20  56 20 7c 20 42 20 4b 20  |M | C I V | B K |
00000750  55 20 7c 20 4c 20 4f 20  50 20 7c 20 47 20 48 20  |U | L O P | G H |
00000760  5a 22 29 29 3b 0a 20 61  73 73 65 72 74 28 20 22  |Z"));. assert( "|
00000770  30 31 31 31 32 32 32 33  33 33 34 34 35 35 36 36  |0111222333445566|
00000780  36 37 37 37 38 38 38 39  39 39 22 20 3d 3d 20 0a  |6777888999" == .|
00000790  20 20 20 77 6f 72 64 54  6f 4e 75 6d 28 22 65 20  |   wordToNum("e |
000007a0  7c 20 6a 20 6e 20 71 20  7c 20 72 20 77 20 78 20  || j n q | r w x |
000007b0  7c 20 64 20 73 20 79 20  7c 20 66 20 74 20 7c 20  || d s y | f t | |
000007c0  61 20 6d 20 7c 20 63 20  69 20 76 20 7c 20 62 20  |a m | c i v | b |
000007d0  6b 20 75 20 7c 20 6c 20  6f 20 70 20 7c 20 67 20  |k u | l o p | g |
000007e0  68 20 7a 22 29 29 3b 0a  20 61 73 73 65 72 74 28  |h z"));. assert(|
000007f0  20 22 30 31 32 33 34 35  36 37 38 39 22 20 3d 3d  | "0123456789" ==|
00000800  20 0a 20 20 20 77 6f 72  64 54 6f 4e 75 6d 28 22  | .   wordToNum("|
00000810  30 20 7c 20 20 20 31 20  20 20 7c 20 20 20 32 20  |0 |   1   |   2 |
00000820  20 20 7c 20 20 20 33 20  20 20 7c 20 20 34 20 20  |  |   3   |  4  |
00000830  7c 20 20 35 20 20 7c 20  20 20 36 20 20 20 7c 20  ||  5  |   6   | |
00000840  20 20 37 20 20 20 7c 20  20 20 38 20 20 20 7c 20  |  7   |   8   | |
00000850  20 20 39 22 29 29 3b 0a  7d 0a 0a 76 6f 69 64 20  |  9"));.}..void |
00000860  6d 61 69 6e 28 20 73 74  72 69 6e 67 5b 5d 20 61  |main( string[] a|
00000870  72 67 73 20 29 0a 7b 0a  20 20 20 20 2f 2f 20 54  |rgs ).{.    // T|
00000880  68 69 73 20 61 73 73 6f  63 69 61 74 69 76 65 20  |his associative |
00000890  61 72 72 61 79 20 6d 61  70 73 20 61 20 6e 75 6d  |array maps a num|
000008a0  62 65 72 20 74 6f 20 61  6e 20 61 72 72 61 79 20  |ber to an array |
000008b0  6f 66 20 77 6f 72 64 73  2e 20 20 20 20 0a 20 20  |of words.    .  |
000008c0  20 20 73 74 72 69 6e 67  61 72 72 61 79 5b 73 74  |  stringarray[st|
000008d0  72 69 6e 67 5d 20 20 20  20 6e 75 6d 32 77 6f 72  |ring]    num2wor|
000008e0  64 73 3b 0a 0a 20 20 20  20 66 6f 72 65 61 63 68  |ds;..    foreach|
000008f0  28 73 74 72 69 6e 67 20  77 6f 72 64 3b 20 6e 65  |(string word; ne|
00000900  77 20 42 75 66 66 65 72  65 64 46 69 6c 65 28 22  |w BufferedFile("|
00000910  64 69 63 74 69 6f 6e 61  72 79 2e 74 78 74 22 20  |dictionary.txt" |
00000920  29 20 29 0a 20 20 20 20  20 20 20 20 6e 75 6d 32  |) ).        num2|
00000930  77 6f 72 64 73 5b 20 77  6f 72 64 54 6f 4e 75 6d  |words[ wordToNum|
00000940  28 77 6f 72 64 29 20 5d  20 7e 3d 20 77 6f 72 64  |(word) ] ~= word|
00000950  2e 64 75 70 3b 20 20 20  20 20 20 20 20 2f 2f 20  |.dup;        // |
00000960  6d 75 73 74 20 64 75 70  0a 0a 20 20 20 20 2f 2f  |must dup..    //|
00000970  2f 20 46 69 6e 64 73 20  61 6c 6c 20 61 6c 74 65  |/ Finds all alte|
00000980  72 6e 61 74 69 76 65 73  20 66 6f 72 20 74 68 65  |rnatives for the|
00000990  20 67 69 76 65 6e 20 6e  75 6d 62 65 72 0a 20 20  | given number.  |
000009a0  20 20 2f 2f 2f 20 28 73  68 6f 75 6c 64 20 68 61  |  /// (should ha|
000009b0  76 65 20 62 65 65 6e 20  73 74 72 69 70 70 65 64  |ve been stripped|
000009c0  20 66 72 6f 6d 20 6e 6f  6e 2d 64 69 67 69 74 20  | from non-digit |
000009d0  63 68 61 72 61 63 74 65  72 73 29 0a 20 20 20 20  |characters).    |
000009e0  73 74 72 69 6e 67 61 72  72 61 79 20 5f 46 69 6e  |stringarray _Fin|
000009f0  64 57 6f 72 64 73 28 20  73 74 72 69 6e 67 20 6e  |dWords( string n|
00000a00  75 6d 62 65 72 73 2c 20  62 6f 6f 6c 20 64 69 67  |umbers, bool dig|
00000a10  69 74 6f 6b 20 29 0a 20  20 20 20 69 6e 20 7b 0a  |itok ).    in {.|
00000a20  20 20 20 20 20 20 20 20  61 73 73 65 72 74 28 6e  |        assert(n|
00000a30  75 6d 62 65 72 73 2e 6c  65 6e 67 74 68 20 3e 20  |umbers.length > |
00000a40  20 30 29 3b 20 20 20 20  0a 20 20 20 20 7d 20 20  | 0);    .    }  |
00000a50  20 20 0a 20 20 20 20 6f  75 74 28 72 65 73 75 6c  |  .    out(resul|
00000a60  74 29 20 7b 0a 20 20 20  20 20 20 20 20 66 6f 72  |t) {.        for|
00000a70  65 61 63 68 20 28 61 3b  20 72 65 73 75 6c 74 29  |each (a; result)|
00000a80  0a 20 20 20 20 20 20 20  20 20 20 20 20 61 73 73  |.            ass|
00000a90  65 72 74 28 20 77 6f 72  64 54 6f 4e 75 6d 28 61  |ert( wordToNum(a|
00000aa0  29 20 3d 3d 20 6e 75 6d  62 65 72 73 20 29 3b 0a  |) == numbers );.|
00000ab0  20 20 20 20 7d 20 20 20  20 0a 20 20 20 20 62 6f  |    }    .    bo|
00000ac0  64 79 20 7b 0a 20 20 20  20 20 20 20 20 73 74 72  |dy {.        str|
00000ad0  69 6e 67 61 72 72 61 79  20 72 65 74 3b 0a 20 20  |ingarray ret;.  |
00000ae0  20 20 20 20 20 20 62 6f  6f 6c 20 66 6f 75 6e 64  |      bool found|
00000af0  77 6f 72 64 20 3d 20 66  61 6c 73 65 3b 0a 20 20  |word = false;.  |
00000b00  20 20 20 20 20 20 66 6f  72 20 28 75 69 6e 74 20  |      for (uint |
00000b10  74 3d 31 3b 20 74 3c 3d  6e 75 6d 62 65 72 73 2e  |t=1; t<=numbers.|
00000b20  6c 65 6e 67 74 68 3b 20  2b 2b 74 29 20 7b 0a 20  |length; ++t) {. |
00000b30  20 20 20 20 20 20 20 20  20 20 20 61 75 74 6f 20  |           auto |
00000b40  61 6c 74 65 72 6e 61 74  69 76 65 73 20 3d 20 6e  |alternatives = n|
00000b50  75 6d 62 65 72 73 5b 30  2e 2e 74 5d 20 69 6e 20  |umbers[0..t] in |
00000b60  6e 75 6d 32 77 6f 72 64  73 3b 0a 20 20 20 20 20  |num2words;.     |
00000b70  20 20 20 20 20 20 20 69  66 20 28 21 61 6c 74 65  |       if (!alte|
00000b80  72 6e 61 74 69 76 65 73  29 0a 20 20 20 20 20 20  |rnatives).      |
00000b90  20 20 20 20 20 20 20 20  20 20 63 6f 6e 74 69 6e  |          contin|
00000ba0  75 65 3b 0a 20 20 20 20  20 20 20 20 20 20 20 20  |ue;.            |
00000bb0  66 6f 75 6e 64 77 6f 72  64 20 3d 20 74 72 75 65  |foundword = true|
00000bc0  3b 0a 20 20 20 20 20 20  20 20 20 20 20 20 69 66  |;.            if|
00000bd0  20 28 6e 75 6d 62 65 72  73 2e 6c 65 6e 67 74 68  | (numbers.length|
00000be0  20 3e 20 20 74 29 20 7b  0a 20 20 20 20 20 20 20  | >  t) {.       |
00000bf0  20 20 20 20 20 20 20 20  20 2f 2f 20 43 6f 6d 62  |         // Comb|
00000c00  69 6e 65 20 61 6c 6c 20  63 75 72 72 65 6e 74 20  |ine all current |
00000c10  61 6c 74 65 72 6e 61 74  69 76 65 73 20 77 69 74  |alternatives wit|
00000c20  68 20 61 6c 6c 20 61 6c  74 65 72 6e 61 74 69 76  |h all alternativ|
00000c30  65 73 20 20 20 20 20 0a  20 20 20 20 20 20 20 20  |es     .        |
00000c40  20 20 20 20 20 20 20 20  2f 2f 20 6f 66 20 74 68  |        // of th|
00000c50  65 20 72 65 73 74 20 28  6e 65 78 74 20 70 69 65  |e rest (next pie|
00000c60  63 65 20 63 61 6e 20 73  74 61 72 74 20 77 69 74  |ce can start wit|
00000c70  68 20 61 20 64 69 67 69  74 29 20 20 20 20 20 20  |h a digit)      |
00000c80  20 20 20 20 20 20 20 20  0a 20 20 20 20 20 20 20  |        .       |
00000c90  20 20 20 20 20 20 20 20  20 66 6f 72 65 61 63 68  |         foreach|
00000ca0  20 28 61 32 3b 20 5f 46  69 6e 64 57 6f 72 64 73  | (a2; _FindWords|
00000cb0  28 20 6e 75 6d 62 65 72  73 5b 74 2e 2e 24 5d 2c  |( numbers[t..$],|
00000cc0  20 74 72 75 65 20 20 20  20 20 29 20 29 0a 20 20  | true     ) ).  |
00000cd0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00000ce0  20 20 66 6f 72 65 61 63  68 28 61 31 3b 20 2a 61  |  foreach(a1; *a|
00000cf0  6c 74 65 72 6e 61 74 69  76 65 73 29 0a 20 20 20  |lternatives).   |
00000d00  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00000d10  20 20 20 20 72 65 74 20  7e 3d 20 61 31 20 7e 20  |    ret ~= a1 ~ |
00000d20  22 20 22 20 7e 20 61 32  3b 0a 20 20 20 20 20 20  |" " ~ a2;.      |
00000d30  20 20 20 20 20 20 7d 0a  20 20 20 20 20 20 20 20  |      }.        |
00000d40  20 20 20 20 65 6c 73 65  20 20 20 20 0a 20 20 20  |    else    .   |
00000d50  20 20 20 20 20 20 20 20  20 20 20 20 20 72 65 74  |             ret|
00000d60  20 7e 3d 20 2a 61 6c 74  65 72 6e 61 74 69 76 65  | ~= *alternative|
00000d70  73 3b 20 20 20 20 2f 2f  20 61 70 70 65 6e 64 20  |s;    // append |
00000d80  74 68 65 73 65 20 61 6c  74 65 72 6e 61 74 69 76  |these alternativ|
00000d90  65 73 0a 20 20 20 20 20  20 20 20 7d 0a 20 20 20  |es.        }.   |
00000da0  20 20 20 20 20 2f 2f 20  54 72 79 20 74 6f 20 6b  |     // Try to k|
00000db0  65 65 70 20 31 20 64 69  67 69 74 2c 20 6f 6e 6c  |eep 1 digit, onl|
00000dc0  79 20 69 66 20 77 65 27  72 65 20 61 6c 6c 6f 77  |y if we're allow|
00000dd0  65 64 20 61 6e 64 20 6e  6f 20 6f 74 68 65 72 0a  |ed and no other.|
00000de0  20 20 20 20 20 20 20 20  2f 2f 20 61 6c 74 65 72  |        // alter|
00000df0  6e 61 74 69 76 65 73 20  77 65 72 65 20 66 6f 75  |natives were fou|
00000e00  6e 64 0a 20 20 20 20 20  20 20 20 2f 2f 20 54 65  |nd.        // Te|
00000e10  73 74 69 6e 67 20 22 72  65 74 2e 6c 65 6e 67 74  |sting "ret.lengt|
00000e20  68 22 20 6d 61 6b 65 73  20 6d 6f 72 65 20 73 65  |h" makes more se|
00000e30  6e 73 65 20 74 68 61 6e  20 74 65 73 74 69 6e 67  |nse than testing|
00000e40  20 22 66 6f 75 6e 64 77  6f 72 64 22 2c 0a 20 20  | "foundword",.  |
00000e50  20 20 20 20 20 20 2f 2f  20 62 75 74 20 74 68 65  |      // but the|
00000e60  20 6f 74 68 65 72 20 69  6d 70 6c 65 6d 65 6e 74  | other implement|
00000e70  61 74 69 6f 6e 73 20 73  65 65 6d 20 74 6f 20 64  |ations seem to d|
00000e80  6f 20 6a 75 73 74 20 74  68 69 73 2e 0a 20 20 20  |o just this..   |
00000e90  20 20 20 20 20 69 66 20  28 64 69 67 69 74 6f 6b  |     if (digitok|
00000ea0  20 26 26 20 21 66 6f 75  6e 64 77 6f 72 64 29 20  | && !foundword) |
00000eb0  7b 20 2f 2f 72 65 74 2e  6c 65 6e 67 74 68 20 3d  |{ //ret.length =|
00000ec0  3d 20 30 20 20 0a 20 20  20 20 20 20 20 20 20 20  |= 0  .          |
00000ed0  20 20 69 66 28 6e 75 6d  62 65 72 73 2e 6c 65 6e  |  if(numbers.len|
00000ee0  67 74 68 20 3e 20 20 31  29 20 7b 0a 20 20 20 20  |gth >  1) {.    |
00000ef0  20 20 20 20 20 20 20 20  20 20 20 20 2f 2f 20 43  |            // C|
00000f00  6f 6d 62 69 6e 65 20 31  20 64 69 67 69 74 20 77  |ombine 1 digit w|
00000f10  69 74 68 20 61 6c 6c 20  61 6c 74 65 6e 61 74 69  |ith all altenati|
00000f20  76 65 73 20 66 72 6f 6d  20 74 68 65 20 72 65 73  |ves from the res|
00000f30  74 20 20 20 20 0a 20 20  20 20 20 20 20 20 20 20  |t    .          |
00000f40  20 20 20 20 20 20 2f 2f  20 28 6e 65 78 74 20 70  |      // (next p|
00000f50  69 65 63 65 20 63 61 6e  20 6e 6f 74 20 73 74 61  |iece can not sta|
00000f60  72 74 20 77 69 74 68 20  61 20 64 69 67 69 74 29  |rt with a digit)|
00000f70  20 20 20 20 20 20 20 20  20 20 0a 20 20 20 20 20  |          .     |
00000f80  20 20 20 20 20 20 20 20  20 20 20 66 6f 72 65 61  |           forea|
00000f90  63 68 20 28 61 3b 20 5f  46 69 6e 64 57 6f 72 64  |ch (a; _FindWord|
00000fa0  73 28 20 6e 75 6d 62 65  72 73 5b 31 2e 2e 24 5d  |s( numbers[1..$]|
00000fb0  2c 20 66 61 6c 73 65 20  29 20 29 0a 20 20 20 20  |, false ) ).    |
00000fc0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00000fd0  72 65 74 20 7e 3d 20 6e  75 6d 62 65 72 73 5b 30  |ret ~= numbers[0|
00000fe0  2e 2e 31 5d 20 7e 20 22  20 22 20 7e 20 61 3b 0a  |..1] ~ " " ~ a;.|
00000ff0  20 20 20 20 20 20 20 20  20 20 20 20 7d 20 20 20  |            }   |
00001000  20 0a 20 20 20 20 20 20  20 20 20 20 20 20 65 6c  | .            el|
00001010  73 65 20 20 20 20 0a 20  20 20 20 20 20 20 20 20  |se    .         |
00001020  20 20 20 20 20 20 20 72  65 74 20 7e 3d 20 6e 75  |       ret ~= nu|
00001030  6d 62 65 72 73 5b 30 2e  2e 31 5d 3b 20 20 20 20  |mbers[0..1];    |
00001040  2f 2f 20 6a 75 73 74 20  61 70 70 65 6e 64 20 74  |// just append t|
00001050  68 69 73 20 64 69 67 69  74 20 20 20 20 20 20 20  |his digit       |
00001060  20 20 20 20 20 20 0a 20  20 20 20 20 20 20 20 7d  |      .        }|
00001070  20 20 20 20 0a 20 20 20  20 20 20 20 20 72 65 74  |    .        ret|
00001080  75 72 6e 20 72 65 74 3b  0a 20 20 20 20 7d 0a 0a  |urn ret;.    }..|
00001090  20 20 20 20 2f 2f 2f 20  28 54 68 69 73 20 66 75  |    /// (This fu|
000010a0  6e 63 74 69 6f 6e 20 77  61 73 20 69 6e 6c 69 6e  |nction was inlin|
000010b0  65 64 20 69 6e 20 74 68  65 20 6f 72 69 67 69 6e  |ed in the origin|
000010c0  61 6c 20 70 72 6f 67 72  61 6d 29 20 0a 20 20 20  |al program) .   |
000010d0  20 2f 2f 2f 20 46 69 6e  64 73 20 61 6c 6c 20 61  | /// Finds all a|
000010e0  6c 74 65 72 6e 61 74 69  76 65 73 20 66 6f 72 20  |lternatives for |
000010f0  74 68 65 20 67 69 76 65  6e 20 70 68 6f 6e 65 20  |the given phone |
00001100  6e 75 6d 62 65 72 20 0a  20 20 20 20 2f 2f 2f 20  |number .    /// |
00001110  52 65 74 75 72 6e 73 3a  20 61 72 72 61 79 20 6f  |Returns: array o|
00001120  66 20 73 74 72 69 6e 67  73 20 0a 20 20 20 20 73  |f strings .    s|
00001130  74 72 69 6e 67 61 72 72  61 79 20 46 69 6e 64 57  |tringarray FindW|
00001140  6f 72 64 73 28 20 73 74  72 69 6e 67 20 70 68 6f  |ords( string pho|
00001150  6e 65 5f 6e 75 6d 62 65  72 20 29 0a 20 20 20 20  |ne_number ).    |
00001160  7b 0a 20 20 20 20 20 20  20 20 69 66 20 28 21 70  |{.        if (!p|
00001170  68 6f 6e 65 5f 6e 75 6d  62 65 72 2e 6c 65 6e 67  |hone_number.leng|
00001180  74 68 29 0a 20 20 20 20  20 20 20 20 20 20 20 20  |th).            |
00001190  72 65 74 75 72 6e 20 6e  75 6c 6c 3b 0a 20 20 20  |return null;.   |
000011a0  20 20 20 20 20 2f 2f 20  53 74 72 69 70 20 74 68  |     // Strip th|
000011b0  65 20 6e 6f 6e 2d 64 69  67 69 74 20 63 68 61 72  |e non-digit char|
000011c0  61 63 74 65 72 73 20 66  72 6f 6d 20 74 68 65 20  |acters from the |
000011d0  70 68 6f 6e 65 20 6e 75  6d 62 65 72 2c 20 61 6e  |phone number, an|
000011e0  64 0a 20 20 20 20 20 20  20 20 2f 2f 20 70 61 73  |d.        // pas|
000011f0  73 20 69 74 20 74 6f 20  74 68 65 20 72 65 63 75  |s it to the recu|
00001200  72 73 69 76 65 20 66 75  6e 63 74 69 6f 6e 20 28  |rsive function (|
00001210  6c 65 61 64 69 6e 67 20  64 69 67 69 74 20 69 73  |leading digit is|
00001220  20 61 6c 6c 6f 77 65 64  29 0a 20 20 20 20 20 20  | allowed).      |
00001230  20 20 72 65 74 75 72 6e  20 5f 46 69 6e 64 57 6f  |  return _FindWo|
00001240  72 64 73 28 20 73 74 72  69 70 4e 6f 6e 44 69 67  |rds( stripNonDig|
00001250  69 74 28 70 68 6f 6e 65  5f 6e 75 6d 62 65 72 29  |it(phone_number)|
00001260  2c 20 74 72 75 65 20 29  3b 20 20 20 20 0a 20 20  |, true );    .  |
00001270  20 20 7d 20 20 20 20 0a  20 20 20 20 0a 20 20 20  |  }    .    .   |
00001280  20 2f 2f 20 52 65 61 64  20 74 68 65 20 70 68 6f  | // Read the pho|
00001290  6e 65 20 6e 75 6d 62 65  72 73 20 20 20 20 20 0a  |ne numbers     .|
000012a0  20 20 20 20 66 6f 72 65  61 63 68 28 73 74 72 69  |    foreach(stri|
000012b0  6e 67 20 70 68 6f 6e 65  3b 20 6e 65 77 20 42 75  |ng phone; new Bu|
000012c0  66 66 65 72 65 64 46 69  6c 65 28 22 69 6e 70 75  |fferedFile("inpu|
000012d0  74 2e 74 78 74 22 20 20  20 29 20 29 0a 20 20 20  |t.txt"   ) ).   |
000012e0  20 20 20 20 20 66 6f 72  65 61 63 68 28 61 6c 74  |     foreach(alt|
000012f0  65 72 6e 61 74 69 76 65  3b 20 46 69 6e 64 57 6f  |ernative; FindWo|
00001300  72 64 73 28 20 70 68 6f  6e 65 20 29 20 29 0a 20  |rds( phone ) ). |
00001310  20 20 20 20 20 20 20 20  20 20 20 77 72 69 74 65  |           write|
00001320  66 6c 6e 28 70 68 6f 6e  65 2c 20 22 3a 20 22 2c  |fln(phone, ": ",|
00001330  20 61 6c 74 65 72 6e 61  74 69 76 65 20 29 3b 0a  | alternative );.|
00001340  7d 0a 0a                                          |}..|
00001343
